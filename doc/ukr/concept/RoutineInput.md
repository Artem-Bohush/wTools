# Масив аргументів

Це сукупність параметрів рутини, котрі сформовано в псевдомасив <code>arguments</code>.

В JavaScript усі передані у функцію аргументи записуються у псевдомасив `arguments`, який є значенням властивості 
`arguments` цієї функції.
Псевдомасив - це об'єкт, який структурно подібний до масиву. Тобто ключем властивості у нього виступає число(індекс).
Також у нього є властивість `lenght`. Проте Array не є його функцією-конструктором. А значить у псевдомасива немає
методів масиву, таких як `indexOf`, `join`, `map` та ін.
```js
{ 0 : 'value 1', 1 : 'value 2', 2 : 'value 3', length : 3 }
```

За необхідності, із псевдомасиву `arguments` можна створити справжній масив:
```js
  function foo()
  {
    console.log( arguments instanceof Array );
    const argumentsArr = Array.from( arguments );
    console.log( argumentsArr instanceof Array );
  }
  foo( 'hello', 'world' );
  // false
  // true
```

Кожну рутину в `JavaScript` можна викликати з необмеженою кількістю аргументів. 
До аргументів, оголошених в параметрах рутини можна звернутись за іменем і за порядковим індексом в `arguments`. 
До аргументів, що не оголошені в параметрах рутини - тільки за індексом.
```js
function logMsgs( msg1, msg2 )
{
  if( msg1 && !msg2 )
  console.log( msg1 );
  if( !msg1 && msg2 )
  console.log( msg2, arguments[ 1 ] );  // two variants of calls of signed parameter
  if( arguments[ 2 ] )
  console.log( arguments[ 2 ] );
}

logMsgs( 'one' ); // returns one
logMsgs( null, 'two' ) // returns two two
logMsgs( null, undefined, 'three' ) // returns three
logMsgs( 'one', 'two', 'three', 'four', 'five' ) // returns three
```

Для коректної роботи рутини, аргументи повинні передаватись у правильній послідовності.
Це створює незручності для програміста, змушує щоразу дізнаватись(навіть запам'ятовувати) правильний
порядок аргументів для кожної рутини. Ця проблема вирішується з допомогою [мапи опцій](#мапа-опцій).

**Підсумки**

- Кожна рутина має масив ([псевдомасив](#масив-аргументів)) аргументів `arguments`;
- Доступ до елементів масиву `arguments` можна здійснити за іменем(якщо аргумент був оголошений)
  та індексом, як у звичайних масивах;
- При використанні масиву аргументів передача аргументів має йти у визначеній послідовності, 
  це може ускладнювати роботу програміста пошуком цієї послідовності.

# Мапа опцій

Це контейнер, що призначений для передачі даних у рутину та управління її поведінкою.

Працювати із мапою опцій зручніше ніж із масивом аргументів, оскільки кожна з опцій має своє ім'я 
та їх послідовність може бути будь-якою.
```js
function someFunction1( optionsMap )
{
  if( optionsMap.option1 >= 0 )
  {
    console.log( 'option1' );
    // some code
  }

  if( optionsMap.option2 < 0 )
  {
    console.log( 'option2' );
    // some code
  }
}
bar( { option1 : 1, option2 : 2 } ); // logs option1
```
В приведеному вище спрощеному прикладі рутина `someFunction1` приймає як аргумент мапу опцій. Цей спосіб передачі вхідних даних 
має переваги в порівнянні з масивом аргументів:
- послідовність опцій може бути будь-якою, це не впливає на коректність виконання коду рутини;
- можливість використання мапи опцій, що згенеровані іншими рутинами;
- можливість перевірки коректності значень мапи опцій при її створенні, до виконання рутини;
- можливість створення нових рутин перевикористанням коду початкової рутини.\
Для цього необхідно створити нову рутину з викликом у ній першої, якій передати вхідну мапу опцій(змінивши її або ж без змін):
```js
function someFunction2( mapOptions )
{
  let result = someFunction( mapOptions );
  // some code
}
```

**Підсумки**

- Мапа опцій зручніша в використанні, оскільки доступ до опцій здійснюється за іменем і порядок опцій не має значення.
- Мапа опцій дозволяє перевикористати код рутини змінивши налаштування за замовчуванням.
- Мапа опцій може генеруватись іншими рутинами.
- На етапі створення мапи опцій, інші рутини можуть виконати перевірку коректності даних.

# Мапа дефолтних значень

Це мапа, яка містить у собі опції, що визначають поведінку рутини за замовчуванням. 

Значення із мапи дефолтних значень можна використати при перевірці опцій вхідної [мапи опцій](#мапа-опцій) - їх значення чи наявності.
Наприклад, якщо не вказати одну з опцій в мапі опцій, а вона є необхідною для коректної роботи рутини, то її значення 
можна взяти із мапи дефолтних значень.
```js
function someFunction( o )
{
  if( !o.randomTotal )
  o.randomTotal = someFunction.defaults.randomTotal;

  const result = [];
  for ( let i = 0; i < o.randomTotal; i++ )
  result.push( _.intRandom( [ -100, 100 ] ) );

  return result;
}
someFunction.defaults =
{
  randomTotal : 1
}

someFunction( { } )
// returns [ someRandomIntegerNumber ]
someFunction( { randomTotal : 2 } )
// returns [ someRandomIntegerNumber, someRandomIntegerNumber ]
```
У приведеному вище спрощеному прикладі рутина за замовчуванням повертає масив із одним випадковим цілим числом.
Якщо нам потрібен масив із випадкових цілих чисел, ми можемо вказати опцію, яка за це відповідає в мапі опцій.

**Підсумки**

- Вказавши опції в мапі дефолтних значень, можна повторно їх не вказувати у вхідній мапі опцій, якщо поведінка рутини
  за замовчуванням нам підходить;
- Мапа дефолтних значень дозволяє зберігати налаштування рутини в одному місці;
- Комбінування опцій в мапі опцій та мапі дефолтних значень дозволяє легко змінювати поведінку рутини.

[Повернутись до змісту](../README.md#Концепції)
